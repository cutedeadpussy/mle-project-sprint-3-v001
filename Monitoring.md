# Мониторинг

Система мониторинга реализована для отслеживания работы сервиса предсказания цен на недвижимость. Дашборд в Grafana включает ключевые метрики, позволяющие анализировать нагрузку, качество работы и бизнес-показатели сервиса. Метрики собираются с помощью Prometheus и визуализируются с оптимальными типами графиков для каждого показателя.

## Для мониторинга выбраны метрики нескольких слоев:

### Инфраструткурный слой:
- main_app_request_duration_seconds (Summary)

Эта метрика выбрана, так как позволяет отслеживать производительность API и выявлять проблемы с задержками.
Используется линейный график, потому что он наглядно показывает распределение времени ответа и помогает выявлять аномалии.

- main_app_requests_total (Counter)

Эта метрика выбрана для мониторинга общей нагрузки на сервис.
Используется линейный график с разбивкой по статусу (success/error), потому что это позволяет одновременно видеть общий трафик и процент ошибок.

### Метрики реального времени:
- main_app_prediction_price_bucket (Histogram)

Эта метрика выбрана, так как дает понимание распределения предсказываемых цен.
Используется heatmap или гистограмма, потому что эти типы визуализации лучше всего отображают распределение значений по заданным корзинам.

- main_app_expensive_predictions_total (Counter)

Эта метрика выбрана как ключевой бизнес-показатель, отражающий количество "премиальных" объектов.
Используется линейный график с дополнительным отображением rate(), потому что это позволяет видеть не только абсолютные значения, но и динамику изменений.

### Метрики прикладного уровня:
- Error rate (производная от main_app_requests_total)

Эта метрика вычисляется как отношение ошибок к общему числу запросов.
Используется gauge с пороговыми значениями, потому что это позволяет оперативно реагировать на рост ошибок.

- Prediction price distribution (анализ main_app_prediction_price)

Эта метрика дает понимание распределения ценовых сегментов.
Используется pie chart или bar chart, потому что эти графики наглядно показывают соотношение разных ценовых категорий